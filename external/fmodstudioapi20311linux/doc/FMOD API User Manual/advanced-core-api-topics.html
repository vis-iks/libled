<html>
<head>
<title>Core API Advanced Topics</title>
<link rel="stylesheet" href="style/docs.css">
<link rel="stylesheet" href="style/code_highlight.css">
<script type="text/javascript" src="scripts/language-selector.js"></script></head>
<body>
<div class="docs-body">
<div class="manual-toc">
<p>FMOD Engine User Manual 2.03</p>
<ul>
<li><a href="welcome.html">Welcome to the FMOD Engine</a></li>
<li><a href="core-api-concepts.html">Core API Key Concepts</a></li>
<li><a href="running-the-core-api.html">Core API Getting Started</a></li>
<li><a href="loading-and-playing-sounds-in-the-core-api.html">Core API Loading and Playing Sounds</a></li>
<li><a href="spatializing-sounds-in-the-core-api.html">Core API Spatializing Sounds</a></li>
<li><a href="mixing-and-routing-in-the-core-api.html">Core API Mixing and Routing</a></li>
<li><a href="using-dsp-effects-in-the-core-api.html">Core API Using DSP Effects</a></li>
<li><a href="effects-reference.html">Core API Effect Reference</a></li>
<li><a href="managing-resources-in-the-core-api.html">Core API Managing Resources</a></li>
<li class="manual-current-chapter manual-active-chapter"><a href="advanced-core-api-topics.html">Core API Advanced Topics</a><ul>
<li><a href="#detecting-audio-devices">Detecting Audio Devices</a></li>
<li><a href="#extracting-pcm-data-from-a-sound">Extracting PCM Data from a Sound</a></li>
<li><a href="#linking-plug-ins">Linking Plug-ins</a><ul>
<li><a href="#static">Static</a><ul>
<li><a href="#codec-example">Codec Example</a></li>
<li><a href="#output-example">Output Example</a></li>
<li><a href="#dsp-example">DSP Example</a></li>
</ul>
</li>
<li><a href="#dynamic">Dynamic</a><ul>
<li><a href="#codec-example_1">Codec Example</a></li>
<li><a href="#output-example_1">Output Example</a></li>
<li><a href="#dsp-example_1">DSP Example</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#recording">Recording</a></li>
<li><a href="#using-output-plug-ins">Using Output Plug-ins</a></li>
<li><a href="#3d-polygon-based-geometry-occlusion">3D Polygon-based Geometry Occlusion</a></li>
<li><a href="#virtual-3d-reverb-system">Virtual 3D Reverb System</a><ul>
<li><a href="#3d-reverbs">3D Reverbs</a></li>
<li><a href="#using-multiple-reverbs">Using Multiple Reverbs</a></li>
</ul>
</li>
<li><a href="#transitioning-from-fmod-ex">Transitioning from FMOD Ex</a><ul>
<li><a href="#studio-api-versus-fmod-designer-api">Studio API Versus FMOD Designer API</a><ul>
<li><a href="#eventsystem-and-eventsystem_create">EventSystem and EventSystem_Create</a></li>
<li><a href="#eventproject">EventProject</a></li>
<li><a href="#fev-and-fsb-files">FEV and FSB Files</a></li>
<li><a href="#eventgroup">EventGroup</a></li>
<li><a href="#event">Event</a></li>
<li><a href="#retrieving-events">Retrieving Events</a></li>
<li><a href="#eventparameter">EventParameter</a></li>
<li><a href="#sustain-points-and-key-off">Sustain Points and Key Off</a></li>
<li><a href="#eventcategory">EventCategory</a></li>
<li><a href="#eventreverb">EventReverb</a></li>
<li><a href="#eventqueue-and-eventqueueentry">EventQueue and EventQueueEntry</a></li>
<li><a href="#musicsystem-and-musicprompt">MusicSystem and MusicPrompt</a></li>
<li><a href="#neteventsystem">NetEventSystem</a></li>
</ul>
</li>
<li><a href="#fmod-studios-core-api-versus-fmod-exs-core-api">FMOD Studio's Core API Versus FMOD Ex's Core API</a><ul>
<li><a href="#no-more-recommended-startup-sequence">No more 'recommended startup sequence'</a></li>
<li><a href="#added-new-dsp-effects">Added new DSP effects</a></li>
<li><a href="#new-file-format-support">New file format support</a></li>
<li><a href="#dolby-atmos-support">Dolby Atmos support</a></li>
<li><a href="#new-dsp-mixing-engine">New DSP mixing engine</a></li>
<li><a href="#added-plug-in-info-helper-function">Added plug-in info helper function</a></li>
<li><a href="#added-background-suspension-support">Added background suspension support</a></li>
<li><a href="#channelgroups-volume-and-panning-are-now-dsp-based-rather-than-reaching-down-to-the-channels-of-the-child-channelgroups">ChannelGroups volume and panning are now DSP based, rather than reaching down to the Channels of the child ChannelGroups.</a></li>
<li><a href="#added-additional-output-streams">Added additional output streams</a></li>
<li><a href="#added-sound-helper-function">Added Sound helper function</a></li>
<li><a href="#added-sample-volume-control">Added sample volume control</a></li>
<li><a href="#added-utf8-support">Added UTF8 support</a></li>
<li><a href="#added-concept-of-a-fader-dsp-per-channel-and-channelgroup">Added concept of a 'fader' DSP per Channel and ChannelGroup</a></li>
<li><a href="#new-dspconnection-types-supported">New DSPConnection types supported</a></li>
<li><a href="#new-dsp-parameter-types">New DSP parameter types</a></li>
<li><a href="#fmod_hardware-support">FMOD_HARDWARE support</a></li>
<li><a href="#channels-and-channelgroups-have-been-merged-into-channelcontrol">Channels and ChannelGroups have been merged into 'ChannelControl'</a></li>
<li><a href="#converting-fmod-reverb-parameters">Converting FMOD Reverb parameters</a></li>
<li><a href="#system_set3dspeakerposition-renamed">System::set3DSpeakerPosition renamed</a></li>
<li><a href="#fmod_channel_free-fmod_channel_reuse-removed-default-channelgroup-now-passed-to-playsound-if-needed">FMOD_CHANNEL_FREE / FMOD_CHANNEL_REUSE removed. Default ChannelGroup now passed to playSound if needed</a></li>
<li><a href="#cdrom-cdda-support-removed">CDROM / CDDA support removed</a></li>
<li><a href="#system_getspectrum-and-system_getwavedata-removed">System::getSpectrum and System::getWaveData removed</a></li>
<li><a href="#w-function-wide-char-support-removed">'W' function wide char support removed</a></li>
<li><a href="#system_setreverbambientproperties-removed">System::setReverbAmbientProperties removed</a></li>
<li><a href="#system_getdspclock-removed">System::getDSPClock removed</a></li>
<li><a href="#getmemoryinfo-functions-have-been-removed-from-all-classes">getMemoryInfo functions have been removed from all classes</a></li>
<li><a href="#sound_setvariations-and-sound_getvariations-have-been-removed">Sound::setVariations and Sound::getVariations have been removed</a></li>
<li><a href="#sound_setsubsoundsentence-has-been-removed">Sound::setSubSoundSentence has been removed</a></li>
<li><a href="#setdelay-and-clock-functions-now-use-64bit-long-long-type-rather-than-than-32bit-hi-and-32bit-low-part-parameters">setDelay and clock functions now use 64bit 'long long' type rather than than 32bit hi and 32bit low part parameters.</a></li>
<li><a href="#channel_setspeakermix-channel_setspeakerlevels-channel_setinputchannelmix-channel_getpan-channel_getspeakermix-and-channel_getspeakerlevels-removed">Channel::setSpeakerMix, Channel::setSpeakerLevels, Channel::setInputChannelMix, Channel::getPan, Channel::getSpeakerMix and Channel::getSpeakerLevels removed</a></li>
<li><a href="#dspconnection_setlevelsgetlevels-have-been-removed">DSPConnection::setLevels/getLevels have been removed.</a></li>
<li><a href="#channel_set3dpanlevel-misnomer-renamed">Channel::set3DPanLevel misnomer renamed</a></li>
<li><a href="#override-functions-removed-from-channelgroup-class">'override' functions removed from ChannelGroup class</a></li>
<li><a href="#system_adddsp-removed-from-the-system-api">System::addDSP removed from the System API</a></li>
<li><a href="#dsp_remove-removed-from-the-dsp-api">DSP::remove removed from the DSP API</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="core-api.html">Core API Reference</a></li>
<li><a href="studio-api-getting-started.html">Studio API Getting Started</a></li>
<li><a href="studio-guide.html">Studio API Guide</a></li>
<li><a href="studio-api-3d-events.html">Studio API 3D Events</a></li>
<li><a href="studio-api-threads.html">Studio API Threads</a></li>
<li><a href="studio-api.html">Studio API Reference</a></li>
<li><a href="platforms.html">Platform Details</a></li>
<li><a href="dsp-plugin-api-guide.html">Plug-in DSP API Guide</a></li>
<li><a href="plugin-api.html">Plug-in API Reference</a></li>
<li><a href="fsbank-api.html">FSBank API Reference</a></li>
<li><a href="troubleshooting.html">Troubleshooting</a></li>
<li><a href="glossary.html">Glossary</a></li>
</ul>
</div>
<div class="manual-content api">
<h1>10. Core API Advanced Topics</h1>
<h2 id="detecting-audio-devices"><a href="#detecting-audio-devices">10.1 Detecting Audio Devices</a></h2>
<p>The <a href="glossary.html#core-api">Core API</a> has automatic sound card detection and recovery during playback. If a new device is inserted after initialization, the <a href="glossary.html#fmod-engine">FMOD Engine</a> will seamlessly jump to it, assuming it is the higher priority device. An example of this would be a USB headset being plugged in.</p>
<p>If the device that is being played on is removed, the FMOD Engine automatically jumps to the device considered next most important (e.g.: On Windows, it would be the new 'default' device). If a new device is inserted, then removed, the FMOD Engine ends up on the device it was originally playing on before the new device was inserted.</p>
<p>You can override the sound card detection behavior with a custom callback. This is the <a class="apilink" href="core-api-system.html#fmod_system_callback_devicelistchanged">FMOD_SYSTEM_CALLBACK_DEVICELISTCHANGED</a> callback.</p>
<h2 id="extracting-pcm-data-from-a-sound"><a href="#extracting-pcm-data-from-a-sound">10.2 Extracting PCM Data from a Sound</a></h2>
<p>The following demonstrates how to extract PCM data from a <a class="apilink" href="core-api-sound.html">Sound</a> and place it into a buffer using <a class="apilink" href="core-api-sound.html#sound_readdata">Sound::readData</a>. This technique is sometimes used to draw a vizualisation of a waveform, to send the data to another piece of software on the same machine, or to send the data over a network.</p>
<p><a class="apilink" href="core-api-common.html#fmod_openonly">FMOD_OPENONLY</a> must be used for the <code>mode</code> argument of <a class="apilink" href="core-api-system.html#system_createsound">System::createSound</a> to ensure that file handle remains open for reading, as other modes will automatically read the entire file's data and close the file handle. Additionally, <a class="apilink" href="core-api-sound.html#sound_seekdata">Sound::seekData</a> can be used to seek within the Sound's data before reading into a buffer.</p>
<p>
<div class="language-selector">
<div class="language-tab" data-language="language-c">C</div>
<div class="language-tab" data-language="language-cpp">C++</div>
<div class="language-tab" data-language="language-csharp">C#</div>
<div class="language-tab" data-language="language-javascript">JS</div>
</div>
</p>
<div class="highlight language-cpp"><pre><span></span><span class="n">FMOD</span><span class="o">::</span><span class="n">Sound</span> <span class="o">*</span><span class="n">sound</span><span class="p">;</span>
<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">length</span><span class="p">;</span>
<span class="kt">char</span> <span class="o">*</span><span class="n">buffer</span><span class="p">;</span>

<span class="n">system</span><span class="o">-&gt;</span><span class="n">createSound</span><span class="p">(</span><span class="s">&quot;drumloop.wav&quot;</span><span class="p">,</span> <span class="n">FMOD_OPENONLY</span><span class="p">,</span> <span class="k">nullptr</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">sound</span><span class="p">);</span>
<span class="n">sound</span><span class="o">-&gt;</span><span class="n">getLength</span><span class="p">(</span><span class="o">&amp;</span><span class="n">length</span><span class="p">,</span> <span class="n">FMOD_TIMEUNIT_RAWBYTES</span><span class="p">);</span>

<span class="n">buffer</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">char</span><span class="p">[</span><span class="n">length</span><span class="p">];</span>
<span class="n">sound</span><span class="o">-&gt;</span><span class="n">readData</span><span class="p">(</span><span class="n">buffer</span><span class="p">,</span> <span class="n">length</span><span class="p">,</span> <span class="k">nullptr</span><span class="p">);</span>

<span class="k">delete</span><span class="p">[]</span> <span class="n">buffer</span><span class="p">;</span>
</pre></div>

<div class="highlight language-c"><pre><span></span><span class="n">FMOD_SOUND</span> <span class="o">*</span><span class="n">sound</span><span class="p">;</span>
<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">length</span><span class="p">;</span>
<span class="kt">char</span> <span class="o">*</span><span class="n">buffer</span><span class="p">;</span>

<span class="n">FMOD_System_CreateSound</span><span class="p">(</span><span class="n">system</span><span class="p">,</span> <span class="s">&quot;drumloop.wav&quot;</span><span class="p">,</span> <span class="n">FMOD_OPENONLY</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">sound</span><span class="p">);</span>
<span class="n">FMOD_Sound_GetLength</span><span class="p">(</span><span class="n">sound</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">length</span><span class="p">,</span> <span class="n">FMOD_TIMEUNIT_RAWBYTES</span><span class="p">);</span>

<span class="n">buffer</span> <span class="o">=</span> <span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="p">)</span><span class="n">malloc</span><span class="p">(</span><span class="n">length</span><span class="p">);</span>
<span class="n">FMOD_Sound_ReadData</span><span class="p">(</span><span class="n">sound</span><span class="p">,</span> <span class="p">(</span><span class="kt">void</span> <span class="o">*</span><span class="p">)</span><span class="n">buffer</span><span class="p">,</span> <span class="n">length</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>

<span class="n">free</span><span class="p">(</span><span class="n">buffer</span><span class="p">);</span>
</pre></div>

<div class="highlight language-csharp"><pre><span></span><span class="n">FMOD</span><span class="p">.</span><span class="n">Sound</span> <span class="n">sound</span><span class="p">;</span>
<span class="kt">uint</span> <span class="n">length</span><span class="p">;</span>
<span class="kt">byte</span><span class="p">[]</span> <span class="n">buffer</span><span class="p">;</span>

<span class="n">system</span><span class="p">.</span><span class="n">createSound</span><span class="p">(</span><span class="s">&quot;drumloop.wav&quot;</span><span class="p">,</span> <span class="n">FMOD</span><span class="p">.</span><span class="n">MODE</span><span class="p">.</span><span class="n">OPENONLY</span><span class="p">,</span> <span class="k">out</span> <span class="n">sound</span><span class="p">);</span>
<span class="n">sound</span><span class="p">.</span><span class="n">getLength</span><span class="p">(</span><span class="k">out</span> <span class="n">length</span><span class="p">,</span> <span class="n">FMOD</span><span class="p">.</span><span class="n">TIMEUNIT</span><span class="p">.</span><span class="n">RAWBYTES</span><span class="p">);</span>

<span class="n">buffer</span> <span class="p">=</span> <span class="k">new</span> <span class="kt">byte</span><span class="p">[(</span><span class="kt">int</span><span class="p">)</span><span class="n">length</span><span class="p">];</span>
<span class="n">sound</span><span class="p">.</span><span class="n">readData</span><span class="p">(</span><span class="n">buffer</span><span class="p">);</span>
</pre></div>

<div class="highlight language-javascript"><pre><span></span><span class="kd">var</span> <span class="nx">sound</span> <span class="o">=</span> <span class="p">{};</span>
<span class="kd">var</span> <span class="nx">length</span> <span class="o">=</span> <span class="p">{};</span>
<span class="kd">var</span> <span class="nx">buffer</span> <span class="o">=</span> <span class="p">{};</span>

<span class="nx">system</span><span class="p">.</span><span class="nx">createSound</span><span class="p">(</span><span class="s2">&quot;drumloop.wav&quot;</span><span class="p">,</span> <span class="nx">FMOD</span><span class="p">.</span><span class="nx">OPENONLY</span><span class="p">,</span> <span class="kc">null</span><span class="p">,</span> <span class="nx">sound</span><span class="p">);</span>
<span class="nx">sound</span> <span class="o">=</span> <span class="nx">sound</span><span class="p">.</span><span class="nx">val</span><span class="p">;</span>

<span class="nx">sound</span><span class="p">.</span><span class="nx">getLength</span><span class="p">(</span><span class="nx">length</span><span class="p">,</span> <span class="nx">FMOD</span><span class="p">.</span><span class="nx">TIMEUNIT_RAWBYTES</span><span class="p">);</span>
<span class="nx">length</span> <span class="o">=</span> <span class="nx">length</span><span class="p">.</span><span class="nx">val</span><span class="p">;</span>

<span class="nx">sound</span><span class="p">.</span><span class="nx">readData</span><span class="p">(</span><span class="nx">buffer</span><span class="p">,</span> <span class="nx">length</span><span class="p">,</span> <span class="kc">null</span><span class="p">);</span>
<span class="nx">buffer</span> <span class="o">=</span> <span class="nx">buffer</span><span class="p">.</span><span class="nx">val</span><span class="p">;</span>
</pre></div>

<p><strong>See Also:</strong> <a class="apilink" href="core-api-common.html#fmod_timeunit">FMOD_TIMEUNIT</a>, <a class="apilink" href="core-api-common.html#fmod_mode">FMOD_MODE</a>, <a class="apilink" href="core-api-sound.html#sound_getlength">Sound::getLength</a>, <a class="apilink" href="core-api-system.html#system_createsound">System::createSound</a>. <a class="apilink" href="core-api-sound.html#sound_seekdata">Sound::seekData</a></p>
<h2 id="linking-plug-ins"><a href="#linking-plug-ins">10.3 Linking Plug-ins</a></h2>
<p>You can extend the functionality of the <a href="glossary.html#fmod-engine">FMOD Engine</a> through the use of plug-ins. Each plug-in type (<a href="plugin-api-codec.html">codec</a>, <a href="plugin-api-dsp.html">DSP</a> and <a href="plugin-api-output.html">output</a>) has its own API you can use. Whether you have developed the plug-in yourself or you are using one from a third party, there are two ways to integrate it into FMOD.</p>
<h3 id="static"><a href="#static">10.3.1 Static</a></h3>
<p>When the plug-in is available to you as source code, you can hook it up to FMOD by including the source file and using one of the plug-in registration APIs <a class="apilink" href="core-api-system.html#system_registercodec">System::registerCodec</a>, <a class="apilink" href="core-api-system.html#system_registerdsp">System::registerDSP</a> or <a class="apilink" href="core-api-system.html#system_registeroutput">System::registerOutput</a>. Each of these functions accepts the relevant description structure that provides the functionality of the plug-in. By convention, plug-in developers create a function that returns this description structure for you. For example, <code>FMOD_AudioGaming_AudioMotors_GetDSPDescription</code> is the name used by one of our partner plug-ins (it follows the form of "FMOD_[CompanyName]_[ProductName]_Get[PluginType]Description").</p>
<p>Alternatively, if you don't have source code, but you do have a static library (such as .lib or .a) it's almost the same process. Link the static library with your project, then call the description function passing the value into the registration function.</p>
<h4 id="codec-example"><a href="#codec-example">Codec Example</a></h4>
<p>
<div class="language-selector">
<div class="language-tab" data-language="language-c">C</div>
<div class="language-tab" data-language="language-cpp">C++</div>
<div class="language-tab" data-language="language-csharp">C#</div>
<div class="language-tab" data-language="language-javascript">JS</div>
</div>
</p>
<div class="highlight language-cpp"><pre><span></span><span class="n">FMOD_RESULT</span> <span class="n">result</span><span class="p">;</span>
<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">handle</span><span class="p">;</span>
<span class="n">FMOD</span><span class="o">::</span><span class="n">Sound</span><span class="o">*</span> <span class="n">sound</span><span class="p">;</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">system</span><span class="o">-&gt;</span><span class="n">registerCodec</span><span class="p">(</span><span class="n">FMOD_Example_GetCodecDescription</span><span class="p">(),</span> <span class="o">&amp;</span><span class="n">handle</span><span class="p">);</span>

<span class="c1">// example.xyz is a file encoded with the codec&#39;s corresponding encoder</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">system</span><span class="o">-&gt;</span><span class="n">createSound</span><span class="p">(</span><span class="s">&quot;example.xyz&quot;</span><span class="p">,</span> <span class="n">FMOD_DEFAULT</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">sound</span><span class="p">);</span>
</pre></div>

<div class="highlight language-c"><pre><span></span><span class="n">FMOD_RESULT</span> <span class="n">result</span><span class="p">;</span>
<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">handle</span><span class="p">;</span>
<span class="n">FMOD_SOUND</span><span class="o">*</span> <span class="n">sound</span><span class="p">;</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">FMOD_System_RegisterCodec</span><span class="p">(</span><span class="n">system</span><span class="p">,</span> <span class="n">FMOD_Example_GetCodecDescription</span><span class="p">(),</span> <span class="o">&amp;</span><span class="n">handle</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>

<span class="c1">// example.xyz is a file encoded with the codec&#39;s corresponding encoder</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">FMOD_System_CreateSound</span><span class="p">(</span><span class="n">system</span><span class="p">,</span> <span class="s">&quot;example.xyz&quot;</span><span class="p">,</span> <span class="n">FMOD_DEFAULT</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">sound</span><span class="p">);</span>
</pre></div>

<div class="highlight language-javascript"><pre><span></span><span class="kd">var</span> <span class="nx">result</span> <span class="o">=</span> <span class="p">{};</span>
<span class="kd">var</span> <span class="nx">handle</span> <span class="o">=</span> <span class="p">{};</span>
<span class="kd">var</span> <span class="nx">sound</span> <span class="o">=</span> <span class="p">{};</span>
<span class="kd">var</span> <span class="nx">outval</span> <span class="o">=</span> <span class="p">{};</span>

<span class="nx">result</span> <span class="o">=</span> <span class="nx">system</span><span class="p">.</span><span class="nx">registerCodec</span><span class="p">(</span><span class="nx">FMOD_Example_GetCodecDescription</span><span class="p">(),</span> <span class="nx">outval</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="nx">handle</span> <span class="o">=</span> <span class="nx">outval</span><span class="p">.</span><span class="nx">val</span><span class="p">;</span>

<span class="c1">// example.xyz is a file encoded with the codec&#39;s corresponding encoder</span>
<span class="nx">result</span> <span class="o">=</span> <span class="nx">system</span><span class="p">.</span><span class="nx">createSound</span><span class="p">(</span><span class="s2">&quot;example.xyz&quot;</span><span class="p">,</span> <span class="nx">FMOD</span><span class="p">.</span><span class="nx">DEFAULT</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">outval</span><span class="p">);</span>
<span class="nx">sound</span> <span class="o">=</span> <span class="nx">outval</span><span class="p">.</span><span class="nx">val</span><span class="p">;</span>
</pre></div>

<div class="admonition language-csharp">
<p>Currently not supported for C#.</p>
</div>
<h4 id="output-example"><a href="#output-example">Output Example</a></h4>
<p>
<div class="language-selector">
<div class="language-tab" data-language="language-c">C</div>
<div class="language-tab" data-language="language-cpp">C++</div>
<div class="language-tab" data-language="language-csharp">C#</div>
<div class="language-tab" data-language="language-javascript">JS</div>
</div>
</p>
<div class="highlight language-cpp"><pre><span></span><span class="n">FMOD_RESULT</span> <span class="n">result</span><span class="p">;</span>
<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">handle</span><span class="p">;</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">system</span><span class="o">-&gt;</span><span class="n">registerOutput</span><span class="p">(</span><span class="n">FMOD_Example_GetOutputDescription</span><span class="p">(),</span> <span class="o">&amp;</span><span class="n">handle</span><span class="p">);</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">system</span><span class="o">-&gt;</span><span class="n">setOutputByPlugin</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
</pre></div>

<div class="highlight language-c"><pre><span></span><span class="n">FMOD_RESULT</span> <span class="n">result</span><span class="p">;</span>
<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">handle</span><span class="p">;</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">FMOD_System_RegisterOutput</span><span class="p">(</span><span class="n">system</span><span class="p">,</span> <span class="n">FMOD_Example_GetCodecDescription</span><span class="p">(),</span> <span class="o">&amp;</span><span class="n">handle</span><span class="p">);</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">FMOD_System_SetOutputByPlugin</span><span class="p">(</span><span class="n">system</span><span class="p">,</span> <span class="n">handle</span><span class="p">);</span>
</pre></div>

<div class="highlight language-javascript"><pre><span></span><span class="kd">var</span> <span class="nx">result</span> <span class="o">=</span> <span class="p">{};</span>
<span class="kd">var</span> <span class="nx">handle</span> <span class="o">=</span> <span class="p">{};</span>
<span class="kd">var</span> <span class="nx">outval</span> <span class="o">=</span> <span class="p">{};</span>

<span class="nx">result</span> <span class="o">=</span> <span class="nx">system</span><span class="p">.</span><span class="nx">registerOutput</span><span class="p">(</span><span class="nx">FMOD_Example_GetOutputDescription</span><span class="p">(),</span> <span class="nx">outval</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="nx">handle</span> <span class="o">=</span> <span class="nx">outval</span><span class="p">.</span><span class="nx">val</span><span class="p">;</span>
<span class="nx">result</span> <span class="o">=</span> <span class="nx">system</span><span class="p">.</span><span class="nx">setOutputByPlugin</span><span class="p">(</span><span class="nx">handle</span><span class="p">);</span>
</pre></div>

<div class="admonition language-csharp">
<p>Currently not supported for C#.</p>
</div>
<h4 id="dsp-example"><a href="#dsp-example">DSP Example</a></h4>
<p>
<div class="language-selector">
<div class="language-tab" data-language="language-c">C</div>
<div class="language-tab" data-language="language-cpp">C++</div>
<div class="language-tab" data-language="language-csharp">C#</div>
<div class="language-tab" data-language="language-javascript">JS</div>
</div>
</p>
<div class="highlight language-cpp"><pre><span></span><span class="n">FMOD</span><span class="o">::</span><span class="n">Channel</span><span class="o">*</span> <span class="n">channel</span><span class="p">;</span>
<span class="n">FMOD</span><span class="o">::</span><span class="n">DSP</span><span class="o">*</span> <span class="n">dsp</span><span class="p">;</span>
<span class="n">FMOD_RESULT</span> <span class="n">result</span><span class="p">;</span>
<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">handle</span><span class="p">;</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">system</span><span class="o">-&gt;</span><span class="n">registerDSP</span><span class="p">(</span><span class="n">FMOD_Example_GetDSPDescription</span><span class="p">(),</span> <span class="o">&amp;</span><span class="n">handle</span><span class="p">);</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">system</span><span class="o">-&gt;</span><span class="n">playSound</span><span class="p">(</span><span class="n">sound</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">false</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">channel</span><span class="p">);</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">system</span><span class="o">-&gt;</span><span class="n">createDSPByPlugin</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">dsp</span><span class="p">);</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">channel</span><span class="o">-&gt;</span><span class="n">addDSP</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">dsp</span><span class="p">);</span>
</pre></div>

<div class="highlight language-c"><pre><span></span><span class="n">FMOD_CHANNEL</span><span class="o">*</span> <span class="n">channel</span><span class="p">;</span>
<span class="n">FMOD_DSP</span><span class="o">*</span> <span class="n">dsp</span><span class="p">;</span>
<span class="n">FMOD_RESULT</span> <span class="n">result</span><span class="p">;</span>
<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">handle</span><span class="p">;</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">FMOD_System_RegisterDSP</span><span class="p">(</span><span class="n">system</span><span class="p">,</span> <span class="n">FMOD_Example_GetDSPDescription</span><span class="p">(),</span> <span class="o">&amp;</span><span class="n">handle</span><span class="p">);</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">FMOD_System_PlaySound</span><span class="p">(</span><span class="n">system</span><span class="p">,</span> <span class="n">sound</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">false</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">channel</span><span class="p">);</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">FMOD_System_CreateDSPByPlugin</span><span class="p">(</span><span class="n">system</span><span class="p">,</span> <span class="n">handle</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">dsp</span><span class="p">);</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">FMOD_Channel_AddDSP</span><span class="p">(</span><span class="n">channel</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">dsp</span><span class="p">);</span>
</pre></div>

<div class="highlight language-javascript"><pre><span></span><span class="kd">var</span> <span class="nx">result</span> <span class="o">=</span> <span class="p">{};</span>
<span class="kd">var</span> <span class="nx">handle</span> <span class="o">=</span> <span class="p">{};</span>
<span class="kd">var</span> <span class="nx">dsp</span> <span class="o">=</span> <span class="p">{};</span>
<span class="kd">var</span> <span class="nx">channel</span> <span class="o">=</span> <span class="p">{};</span>
<span class="kd">var</span> <span class="nx">outval</span> <span class="o">=</span> <span class="p">{};</span>

<span class="nx">result</span> <span class="o">=</span> <span class="nx">system</span><span class="p">.</span><span class="nx">registerDSP</span><span class="p">(</span><span class="nx">FMOD_Example_GetDSPDescription</span><span class="p">(),</span> <span class="nx">outval</span><span class="p">);</span>
<span class="nx">handle</span> <span class="o">=</span> <span class="nx">outval</span><span class="p">.</span><span class="nx">val</span><span class="p">;</span>
<span class="nx">result</span> <span class="o">=</span> <span class="nx">system</span><span class="p">.</span><span class="nx">playSound</span><span class="p">(</span><span class="nx">sound</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="kc">false</span><span class="p">,</span> <span class="nx">outval</span><span class="p">);</span>
<span class="nx">channel</span> <span class="o">=</span> <span class="nx">outval</span><span class="p">.</span><span class="nx">val</span><span class="p">;</span>
<span class="nx">result</span> <span class="o">=</span> <span class="nx">system</span><span class="p">.</span><span class="nx">createDSPByPlugin</span><span class="p">(</span><span class="nx">handle</span><span class="p">,</span> <span class="nx">outval</span><span class="p">);</span>
<span class="nx">dsp</span> <span class="o">=</span> <span class="nx">outval</span><span class="p">.</span><span class="nx">val</span><span class="p">;</span>
<span class="nx">result</span> <span class="o">=</span> <span class="nx">channel</span><span class="p">.</span><span class="nx">addDSP</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nx">dsp</span><span class="p">);</span>
</pre></div>

<div class="admonition language-csharp">
<p>Currently not supported for C#.</p>
</div>
<h3 id="dynamic"><a href="#dynamic">10.3.2 Dynamic</a></h3>
<p>Another way plug-in code is distributed is via a prebuilt dynamic library (such as .so, .dll or .dylib). These are even easier to integrate with FMOD than static libraries.</p>
<p>First, ensure the plug-in file is in the working directory of your application. This is often the same location as the application executable. Then, in your code call <a class="apilink" href="core-api-system.html#system_loadplugin">System::loadPlugin</a>, passing in the name of the library.</p>
<p>That's all there is to it. Under the hood, the FMOD Engine will open the library and search for well known functions similar to the description functions mentioned above. Once found, the plug-in is registered and ready for use.</p>
<h4 id="codec-example_1"><a href="#codec-example_1">Codec Example</a></h4>
<p>
<div class="language-selector">
<div class="language-tab" data-language="language-c">C</div>
<div class="language-tab" data-language="language-cpp">C++</div>
<div class="language-tab" data-language="language-csharp">C#</div>
<div class="language-tab" data-language="language-javascript">JS</div>
</div>
</p>
<div class="highlight language-cpp"><pre><span></span><span class="n">FMOD_RESULT</span> <span class="n">result</span><span class="p">;</span>
<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">handle</span><span class="p">;</span>
<span class="n">FMOD</span><span class="o">::</span><span class="n">Sound</span><span class="o">*</span> <span class="n">sound</span><span class="p">;</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">system</span><span class="o">-&gt;</span><span class="n">loadPlugin</span><span class="p">(</span><span class="s">&quot;example_codec.dll&quot;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">handle</span><span class="p">);</span>

<span class="c1">// example.xyz is a file encoded with the codec&#39;s corresponding encoder</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">system</span><span class="o">-&gt;</span><span class="n">createSound</span><span class="p">(</span><span class="s">&quot;example.xyz&quot;</span><span class="p">,</span> <span class="n">FMOD_DEFAULT</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">sound</span><span class="p">);</span>
</pre></div>

<div class="highlight language-c"><pre><span></span><span class="n">FMOD_RESULT</span> <span class="n">result</span><span class="p">;</span>
<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">handle</span><span class="p">;</span>
<span class="n">FMOD_SOUND</span><span class="o">*</span> <span class="n">sound</span><span class="p">;</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">FMOD_System_LoadPlugin</span><span class="p">(</span><span class="n">system</span><span class="p">,</span> <span class="s">&quot;example_codec.dll&quot;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">handle</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>

<span class="c1">// example.xyz is a file encoded with the codec&#39;s corresponding encoder</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">FMOD_System_CreateSound</span><span class="p">(</span><span class="n">system</span><span class="p">,</span> <span class="s">&quot;example.xyz&quot;</span><span class="p">,</span> <span class="n">FMOD_DEFAULT</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">sound</span><span class="p">);</span>
</pre></div>

<div class="highlight language-csharp"><pre><span></span><span class="n">FMOD</span><span class="p">.</span><span class="n">Result</span> <span class="n">result</span><span class="p">;</span>
<span class="kt">uint</span> <span class="n">handle</span><span class="p">;</span>
<span class="n">FMOD</span><span class="p">.</span><span class="n">Sound</span> <span class="n">sound</span><span class="p">;</span>

<span class="n">result</span> <span class="p">=</span> <span class="n">system</span><span class="p">.</span><span class="n">loadPlugin</span><span class="p">(</span><span class="s">&quot;example_codec.dll&quot;</span><span class="p">,</span> <span class="k">out</span> <span class="n">handle</span><span class="p">);</span>

<span class="c1">// example.xyz is a file encoded with the codec&#39;s corresponding encoder</span>
<span class="n">result</span> <span class="p">=</span> <span class="n">system</span><span class="p">.</span><span class="n">createSound</span><span class="p">(</span><span class="s">&quot;example.xyz&quot;</span><span class="p">,</span> <span class="n">FMOD</span><span class="p">.</span><span class="n">MODE</span><span class="p">.</span><span class="n">DEFAULT</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="k">out</span> <span class="n">sound</span><span class="p">);</span>
</pre></div>

<div class="admonition language-javascript">
<p>Currently not supported for JavaScript.</p>
</div>
<h4 id="output-example_1"><a href="#output-example_1">Output Example</a></h4>
<p>
<div class="language-selector">
<div class="language-tab" data-language="language-c">C</div>
<div class="language-tab" data-language="language-cpp">C++</div>
<div class="language-tab" data-language="language-csharp">C#</div>
<div class="language-tab" data-language="language-javascript">JS</div>
</div>
</p>
<div class="highlight language-cpp"><pre><span></span><span class="n">FMOD_RESULT</span> <span class="n">result</span><span class="p">;</span>
<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">handle</span><span class="p">;</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">system</span><span class="o">-&gt;</span><span class="n">loadPlugin</span><span class="p">(</span><span class="s">&quot;example_output.dll&quot;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">handle</span><span class="p">);</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">system</span><span class="o">-&gt;</span><span class="n">setOutputByPlugin</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
</pre></div>

<div class="highlight language-c"><pre><span></span><span class="n">FMOD_RESULT</span> <span class="n">result</span><span class="p">;</span>
<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">handle</span><span class="p">;</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">FMOD_System_LoadPlugin</span><span class="p">(</span><span class="n">system</span><span class="p">,</span> <span class="s">&quot;example_output.dll&quot;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">handle</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">FMOD_System_SetOutputByPlugin</span><span class="p">(</span><span class="n">system</span><span class="p">,</span> <span class="n">handle</span><span class="p">);</span>
</pre></div>

<div class="highlight language-csharp"><pre><span></span><span class="n">FMOD</span><span class="p">.</span><span class="n">Result</span> <span class="n">result</span><span class="p">;</span>
<span class="kt">uint</span> <span class="n">handle</span><span class="p">;</span>

<span class="n">result</span> <span class="p">=</span> <span class="n">system</span><span class="p">.</span><span class="n">loadPlugin</span><span class="p">(</span><span class="s">&quot;example_output.dll&quot;</span><span class="p">,</span> <span class="k">out</span> <span class="n">handle</span><span class="p">);</span>
<span class="n">result</span> <span class="p">=</span> <span class="n">system</span><span class="p">.</span><span class="n">setOutputByPlugin</span><span class="p">(</span><span class="n">handle</span><span class="p">);</span>
</pre></div>

<div class="admonition language-javascript">
<p>Currently not supported for JavaScript.</p>
</div>
<h4 id="dsp-example_1"><a href="#dsp-example_1">DSP Example</a></h4>
<p>
<div class="language-selector">
<div class="language-tab" data-language="language-c">C</div>
<div class="language-tab" data-language="language-cpp">C++</div>
<div class="language-tab" data-language="language-csharp">C#</div>
<div class="language-tab" data-language="language-javascript">JS</div>
</div>
</p>
<div class="highlight language-cpp"><pre><span></span><span class="n">FMOD</span><span class="o">::</span><span class="n">Channel</span><span class="o">*</span> <span class="n">channel</span><span class="p">;</span>
<span class="n">FMOD</span><span class="o">::</span><span class="n">DSP</span><span class="o">*</span> <span class="n">dsp</span><span class="p">;</span>
<span class="n">FMOD_RESULT</span> <span class="n">result</span><span class="p">;</span>
<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">handle</span><span class="p">;</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">system</span><span class="o">-&gt;</span><span class="n">loadPlugin</span><span class="p">(</span><span class="s">&quot;example_dsp.dll&quot;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">handle</span><span class="p">);</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">system</span><span class="o">-&gt;</span><span class="n">playSound</span><span class="p">(</span><span class="n">sound</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">false</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">channel</span><span class="p">);</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">system</span><span class="o">-&gt;</span><span class="n">createDSPByPlugin</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">dsp</span><span class="p">);</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">channel</span><span class="o">-&gt;</span><span class="n">addDSP</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">dsp</span><span class="p">);</span>
</pre></div>

<div class="highlight language-c"><pre><span></span><span class="n">FMOD_CHANNEL</span><span class="o">*</span> <span class="n">channel</span><span class="p">;</span>
<span class="n">FMOD_DSP</span><span class="o">*</span> <span class="n">dsp</span><span class="p">;</span>
<span class="n">FMOD_RESULT</span> <span class="n">result</span><span class="p">;</span>
<span class="kt">unsigned</span> <span class="kt">int</span> <span class="n">handle</span><span class="p">;</span>

<span class="n">result</span> <span class="o">=</span> <span class="n">FMOD_System_LoadPlugin</span><span class="p">(</span><span class="n">system</span><span class="p">,</span> <span class="s">&quot;example_dsp.dll&quot;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">handle</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">FMOD_System_PlaySound</span><span class="p">(</span><span class="n">system</span><span class="p">,</span> <span class="n">sound</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="nb">false</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">channel</span><span class="p">);</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">FMOD_System_CreateDSPByPlugin</span><span class="p">(</span><span class="n">system</span><span class="p">,</span> <span class="n">handle</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">dsp</span><span class="p">);</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">FMOD_Channel_AddDSP</span><span class="p">(</span><span class="n">channel</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">dsp</span><span class="p">);</span>
</pre></div>

<div class="highlight language-csharp"><pre><span></span><span class="n">FMOD</span><span class="p">.</span><span class="n">Channel</span> <span class="n">channel</span><span class="p">;</span>
<span class="n">FMOD</span><span class="p">.</span><span class="n">DSP</span> <span class="n">dsp</span><span class="p">;</span>
<span class="n">FMOD_RESULT</span> <span class="n">result</span><span class="p">;</span>
<span class="kt">uint</span> <span class="n">handle</span><span class="p">;</span>

<span class="n">result</span> <span class="p">=</span> <span class="n">system</span><span class="p">.</span><span class="n">loadPlugin</span><span class="p">(</span><span class="s">&quot;example_dsp.dll&quot;</span><span class="p">,</span> <span class="k">out</span> <span class="n">handle</span><span class="p">);</span>
<span class="n">result</span> <span class="p">=</span> <span class="n">system</span><span class="p">.</span><span class="n">playSound</span><span class="p">(</span><span class="n">sound</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="k">false</span><span class="p">,</span> <span class="k">out</span> <span class="n">channel</span><span class="p">);</span>
<span class="n">result</span> <span class="p">=</span> <span class="n">system</span><span class="p">.</span><span class="n">createDSPByPlugin</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="k">out</span> <span class="n">dsp</span><span class="p">);</span>
<span class="n">result</span> <span class="p">=</span> <span class="n">channel</span><span class="p">.</span><span class="n">addDSP</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="n">dsp</span><span class="p">);</span>
</pre></div>

<div class="admonition language-javascript">
<p>Currently not supported for JavaScript.</p>
</div>
<h2 id="recording"><a href="#recording">10.4 Recording</a></h2>
<p>The <a href="glossary.html#core-api">Core API</a> has the ability to record directly from an input into a <a class="apilink" href="core-api-sound.html">Sound</a> object. This <a class="apilink" href="core-api-sound.html">Sound</a> can then be played back after it has been recorded, or the raw data can be retrieved with <a class="apilink" href="core-api-sound.html#sound_lock">Sound::lock</a> and <a class="apilink" href="core-api-sound.html#sound_unlock">Sound::unlock</a> functions.</p>
<p>The <a class="apilink" href="core-api-sound.html">Sound</a> can also be played while it is recording, to allow realtime effects. A simple technique to achieve this is to start recording, then wait a small amount of time (for example, 50 ms), then play the <a class="apilink" href="core-api-sound.html">Sound</a>. This keeps the play cursor just behind the record cursor. For information on how to do this and an example of source code, see the "record" example in the <code>/api/core/examples/bin</code> folder of the <a href="glossary.html#fmod-engine">FMOD Engine</a> distribution.</p>
<h2 id="using-output-plug-ins"><a href="#using-output-plug-ins">10.5 Using Output Plug-ins</a></h2>
<p>The <a href="glossary.html#core-api">Core API</a> has support for user-created output plug-ins. A developer can create a plug-in to take FMOD audio output to a custom target. This could be a hardware device, or a non standard file/memory/network based system.</p>
<p>An output mode can run in real-time, or non real-time which allows the developer to run FMOD's <a href="glossary.html#mixer">mixer</a>/streamer/system at faster or slower than real-time rates.</p>
<p>Plug-ins can be created inline with the application, or compiled as a stand-alone dynamic library (ie .dll or .so)</p>
<p>Unlike <a href="glossary.html#dsp">DSP</a> and instrument plug-ins, output plug-ins cannot be used in conjunction with <a href="glossary.html#fmod-studio">FMOD Studio</a>.</p>
<p>See <a class="apilink" href="core-api-system.html#system_registeroutput">System::registerOutput</a> documentation for more.</p>
<h2 id="3d-polygon-based-geometry-occlusion"><a href="#3d-polygon-based-geometry-occlusion">10.6 3D Polygon-based Geometry Occlusion</a></h2>
<p>The Core API supports the supply of polygon mesh data that can be processed in real time to create the effect of occlusion in a 3D world. In real world terms, you can stop sounds from traveling through walls, or even confine reverb inside a geometric volume so that it doesn't leak out into other areas.</p>
<p>To use the FMOD Geometry Engine, create a mesh object with <a class="apilink" href="core-api-system.html#system_creategeometry">System::createGeometry</a>. Then, add polygons to each mesh with <a class="apilink" href="core-api-geometry.html#geometry_addpolygon">Geometry::addPolygon</a>. Each object can be translated, rotated and scaled to fit your environment.</p>
<h2 id="virtual-3d-reverb-system"><a href="#virtual-3d-reverb-system">10.7 Virtual 3D Reverb System</a></h2>
<p>It is common for environments to exhibit different reverberation characteristics in different locations. Ideally as the listener moves throughout the virtual environment, the sound of the reverberation should change accordingly. This change in reverberation properties can be modeled in <a href="glossary.html#fmod-studio">FMOD Studio</a> by using the built in <a class="apilink" href="core-api-reverb3d.html">Reverb3D</a> API.</p>
<h3 id="3d-reverbs"><a href="#3d-reverbs">10.7.1 3D Reverbs</a></h3>
<p>The 3D reverb system works by using the main built-in system I3DL2 reverb, and allows you to place multiple virtual reverb spheres within the 3D world. Each reverb sphere defines:</p>
<ul>
<li>Its position within the 3D world</li>
<li>The area, or sphere of influence affected by the reverb (with minimum and maximum distances)</li>
<li>The reverberation properties of the area</li>
</ul>
<p>At runtime, the <a href="glossary.html#fmod-engine">FMOD Engine</a> interpolates (or morphs) between the characteristics of 3D reverbs according to the listener's proximity and the position and overlap of the reverbs. This method allows the FMOD Engine to use a single <a href="effects-reference.html#sfx-reverb">reverb DSP unit</a> to provide a dynamic reverberation within the 3D world. This process is illustrated in the image below.</p>
<p><img alt="3D Reverb" src="images/3d-reverb.png" /></p>
<p>When the listener is within the sphere of effect of one or more 3D reverbs, the listener hears a weighted combination of the affecting reverbs. When the listener is outside the coverage of all 3D reverbs, the reverb is not applied.</p>
<p>Because this method requires only one reverb <a href="glossary.html#dsp">DSP unit</a> regardless of how many virtual reverb spheres are created, there is no additional CPU cost for creating additional reverb spheres.</p>
<p>By default, 2D <a href="glossary.html#sound">sounds</a> share this same reverb DSP instance. To avoid 2D sounds having reverb, use <a class="apilink" href="core-api-channelcontrol.html#channelcontrol_setreverbproperties">ChannelControl::setReverbProperties</a> and set wet = 0, or shift the 2D Sounds to a different reverb DSP instance, using the same function. Adding a second reverb DSP unit for this purpose will incur a small CPU and memory hit.</p>
<p>The following is an example of using the call <a class="apilink" href="core-api-system.html#system_createreverb3d">System::createReverb3D</a>, then setting the characteristics of the reverb using <a class="apilink" href="core-api-reverb3d.html#reverb3d_setproperties">Reverb3D::setProperties</a>.</p>
<div class="highlight language-text"><pre><span></span>FMOD::Reverb *reverb;
result = system-&gt;createReverb3D(&amp;reverb);
FMOD_REVERB_PROPERTIES prop2 = FMOD_PRESET_CONCERTHALL;
reverb-&gt;setProperties(&amp;prop2);
</pre></div>

<p>In order for a reverb to exhibit 3D properties, it is necessary to set its 3D attributes. The method <a class="apilink" href="core-api-reverb3d.html#reverb3d_set3dattributes">Reverb3D::set3DAttributes</a> allows you to set a reverb's origin position, as well as the area of coverage using the minimum distance and maximum distance.</p>
<div class="highlight language-text"><pre><span></span>FMOD_VECTOR pos = { -10.0f, 0.0f, 0.0f };
float mindist = 10.0f; 
float maxdist = 20.0f;
reverb-&gt;set3DAttributes(&amp;pos, mindist, maxdist);
</pre></div>

<p>As the 3D reverb uses the position of the listener in its weighting calculation, you also need to ensure that the location of the listener is set using <a href="core-api-system.html#system_set3dlistenerattributes">System::set3dListenerAttributes</a>.</p>
<div class="highlight language-text"><pre><span></span>FMOD_VECTOR  listenerpos  = { 0.0f, 0.0f, -1.0f };
system-&gt;set3DListenerAttributes(0, &amp;listenerpos, 0, 0, 0);
</pre></div>

<p>This is all that is needed to get virtual 3d reverb zones to work. From this point onwards, based on the listener position, reverb presets should morph into each other if they overlap, and attenuate based on the listener's distance from the 3D reverb sphere's center.</p>
<h3 id="using-multiple-reverbs"><a href="#using-multiple-reverbs">10.7.2 Using Multiple Reverbs</a></h3>
<p>The interpolation of 3D reverbs is only an estimation of how the multiple reverberations within the environment may sound. In some situations, greater realism is required, and so multiple styles of reverberations within a single environment must be modeled. For example, imagine a large church hall with a tunnel down into the catacombs. The reverb applied to the player's footsteps within the church hall (such as <a class="apilink" href="core-api-system.html#fmod_preset_stoneroom">FMOD_PRESET_STONEROOM</a>) could be quite different to that of the monster sounds emitting from the tunnel (which may be applied with both <a class="apilink" href="core-api-system.html#fmod_preset_sewerpipe">FMOD_PRESET_SEWERPIPE</a> and <a class="apilink" href="core-api-system.html#fmod_preset_stoneroom">FMOD_PRESET_STONEROOM</a>). To handle this situation, multiple instances of the <a href="effects-reference.html#sfx-reverb">reverb DSP</a> are required. As many as four instances of the reverb <a href="glossary.html#dsp">DSP</a> can be added to the FMOD <a href="glossary.html#dsp-graph">DSP graph</a>, though each instance incurs a cost of more CPU time and memory usage.</p>
<p><a href="glossary.html#fmod-studio">FMOD Studio</a> allows a sound designer to design their own reverbs, add them to group buses, and use sends and mixer snapshots to control the reverb mix. This section, however, describes how to use the <a href="glossary.html#core-api">Core API</a> to add reverbs, query an instance's reverb properties, and control the wet/dry mix of each reverb instance on a per-channel basis.</p>
<p>Should you want to model multiple reverbs types within an environment without the extra resource expense of multiple reverb effects, use the method described in the <a href="advanced-core-api-topics.html#3d-reverbs">3D Reverbs</a> section of this chapter instead, as it covers using automated 3D reverb zones to simulate reverb for different environments using only a single reverb instance.</p>
<p>Below is an example of using <a class="apilink" href="core-api-system.html#system_setreverbproperties">System::setReverbProperties</a> to set up four different reverb effects. You do not need to explicitly create the extra reverb instance DSP objects, as the FMOD Engine creates them and connects them to the DSP graph when you reference them.</p>
<div class="highlight language-text"><pre><span></span>FMOD_REVERB_PROPERTIES prop1 = FMOD_PRESET_HALLWAY;
FMOD_REVERB_PROPERTIES prop2 = FMOD_PRESET_SEWERPIPE;
FMOD_REVERB_PROPERTIES prop3 = FMOD_PRESET_PARKINGLOT;
FMOD_REVERB_PROPERTIES prop4 = FMOD_PRESET_CONCERTHALL;
</pre></div>

<p>The example defines four different <a class="apilink" href="core-api-system.html#fmod_reverb_properties">FMOD_REVERB_PROPERTIES</a> structures using presets. You can define your own reverb settings, but presets make it easier to get some common reverbs working. For more information about reverb presets, see the <a class="apilink" href="core-api-system.html#fmod_reverb_presets">FMOD_REVERB_PRESETS</a> section of the <a href="core-api.html">Core API Reference</a> chapter.</p>
<p>Once the reverb effects are set up, the 'instance' parameter may be used to set which reverb DSP unit should be used for each preset, while calling the <a class="apilink" href="core-api-system.html#system_setreverbproperties">System::setReverbProperties</a> function.</p>
<div class="highlight language-text"><pre><span></span>result = system-&gt;setReverbProperties(0, &amp;prop1);
result = system-&gt;setReverbProperties(1, &amp;prop2);
result = system-&gt;setReverbProperties(2, &amp;prop3);
result = system-&gt;setReverbProperties(3, &amp;prop4);
</pre></div>

<p>Should you wish to get the current System reverb properties, you must specify the instance number in the 'instance' parameter when calling <a class="apilink" href="core-api-system.html#system_getreverbproperties">System::getReverbProperties</a>, as shown in the below example of getting instance 3's properties. </p>
<div class="highlight language-text"><pre><span></span>FMOD_REVERB_PROPERTIES prop = { 0 };
result = system-&gt;getReverbProperties(3, &amp;prop);
</pre></div>

<p>You can set the wet/dry mix for each reverb on a <a href="glossary.html#channel">channel</a> of the FMOD Engine's <a href="glossary.html#mixer">mixer</a> with <a class="apilink" href="core-api-channelcontrol.html#channelcontrol_setreverbproperties">ChannelControl::setReverbProperties</a>. By default, a channel sends to all instances. The example below sets instance 1's send value to linear 0.0 (-80 db) (off).</p>
<div class="highlight language-text"><pre><span></span>result = channel-&gt;setReverbProperties(1, 0.0f);
</pre></div>

<p>To get the reverb mix level to be full volume again, set it to 1 (0db).</p>
<div class="highlight language-text"><pre><span></span>result = channel-&gt;setReverbProperties(1, 1.0f);
</pre></div>

<h2 id="transitioning-from-fmod-ex"><a href="#transitioning-from-fmod-ex">10.8 Transitioning from FMOD Ex</a></h2>
<p>This section describes the differences between FMOD Ex and <a href="glossary.html#fmod-studio">FMOD Studio</a>.</p>
<h3 id="studio-api-versus-fmod-designer-api"><a href="#studio-api-versus-fmod-designer-api">10.8.1 Studio API Versus FMOD Designer API</a></h3>
<p>The <a href="glossary.html#studio-api">Studio API</a> is conceptually similar to the old FMOD Designer API, but most classes have been renamed, and some have been removed or split up.</p>
<h4 id="eventsystem-and-eventsystem_create"><a href="#eventsystem-and-eventsystem_create">EventSystem and EventSystem_Create</a></h4>
<p>The <a class="apilink" href="studio-api-system.html">Studio::System</a> class is analogous to the old EventSystem class. The static <a class="apilink" href="studio-api-system.html#studio_system_create">Studio::System::create</a> function is analogous to the old EventSystem_Create function.</p>
<h4 id="eventproject"><a href="#eventproject">EventProject</a></h4>
<p>The <a class="apilink" href="studio-api-bank.html">Studio::Bank</a> class is analogous to the old EventProject class.</p>
<h4 id="fev-and-fsb-files"><a href="#fev-and-fsb-files">FEV and FSB Files</a></h4>
<p>Each FMOD Designer project produced a single .fev file and multiple <a href="glossary.html#fsb">.fsb</a> files. In contrast, an FMOD Studio project produces multiple <a href="glossary.html#bank-file">.bank files</a>, which contain <a href="glossary.html#metadata">event metadata</a> as well as <a href="glossary.html#sample-data">sample data</a>. See the <a class="apilink" href="studio-api-system.html#studio_system_loadbankfile">Studio::System::loadBankFile</a>, <a class="apilink" href="studio-api-bank.html#studio_bank_loadsampledata">Studio::Bank::loadSampleData</a>, and <a class="apilink" href="studio-api-eventdescription.html#studio_eventdescription_loadsampledata">Studio::EventDescription::loadSampleData</a> functions. The Core API still supports loading .fsb files directly.</p>
<h4 id="eventgroup"><a href="#eventgroup">EventGroup</a></h4>
<p>FMOD Studio doesn't have the concept of EventGroups. Events can be placed in folders, but this has no significance at runtime. To achieve the loading control formerly provided by EventGroups, events can be placed in different banks.</p>
<h4 id="event"><a href="#event">Event</a></h4>
<p>The old Event class has been split into two classes: <a class="apilink" href="studio-api-eventdescription.html">Studio::EventDescription</a> and <a class="apilink" href="studio-api-eventinstance.html">Studio::EventInstance</a>. <a class="apilink" href="studio-api-eventdescription.html">Studio::EventDescription</a> holds the static data that describes an event, while <a class="apilink" href="studio-api-eventinstance.html">Studio::EventInstance</a> is a playable instance of an event. These two classes correspond to old Event objects retrieved by calling getEvent with or without the FMOD_EVENT_INFOONLY flag.</p>
<p>The FMOD Designer API used to create a fixed number of event instances when you first called getEvent without FMOD_EVENT_INFOONLY, whereas the Studio API creates a single instance each time you call <a class="apilink" href="studio-api-eventdescription.html#studio_eventdescription_createinstance">Studio::EventDescription::createInstance</a>. This gives you more control over the memory usage for each event.</p>
<h4 id="retrieving-events"><a href="#retrieving-events">Retrieving Events</a></h4>
<p>Events can be retrieved by ID (using <a class="apilink" href="studio-api-system.html#studio_system_geteventbyid">Studio::System::getEventByID</a>) or by path (using <a class="apilink" href="studio-api-system.html#studio_system_getevent">Studio::System::getEvent</a>).</p>
<p>Event IDs are <a href="glossary.html#guid">GUIDs (globally unique identifiers)</a>, and stay the same even if the event is renamed or moved around in the project. IDs can be parsed from a string using <a class="apilink" href="studio-api-common.html#studio_parseid">Studio::parseID</a>, or looked up from a path using <a class="apilink" href="studio-api-system.html#studio_system_lookupid">Studio::System::lookupID</a> if the "Master Bank.strings.bank" file is loaded.</p>
<p>Event paths consist of the string "event:/", followed by the the path to the event within the project's folder structure. To retrieve events by path, the "Master Bank.strings.bank" file must be loaded.</p>
<h4 id="eventparameter"><a href="#eventparameter">EventParameter</a></h4>
<p>There is no class analogous to the old EventParameter class. Instead use the parameter getting and setting functions in <a class="apilink" href="studio-api-eventinstance.html">Studio::EventInstance</a>: <a class="apilink" href="studio-api-eventinstance.html#studio_eventinstance_getparameterbyid">Studio::EventInstance::getParameterByID</a>, <a class="apilink" href="studio-api-eventinstance.html#studio_eventinstance_getparameterbyname">Studio::EventInstance::getParameterByName</a>, <a class="apilink" href="studio-api-eventinstance.html#studio_eventinstance_setparameterbyid">Studio::EventInstance::setParameterByID</a>, <a class="apilink" href="studio-api-eventinstance.html#studio_eventinstance_setparameterbyname">Studio::EventInstance::setParameterByName</a>, <a class="apilink" href="studio-api-eventinstance.html#studio_eventinstance_setparametersbyids">Studio::EventInstance::setParametersByIDs</a>.</p>
<h4 id="sustain-points-and-key-off"><a href="#sustain-points-and-key-off">Sustain Points and Key Off</a></h4>
<p>The old EventParameter class had a keyOff function to move past the next sustain point. In FMOD Studio and the Studio API, this behavior is implemented via a built-in KeyOff that can be triggered via <a class="apilink" href="studio-api-eventinstance.html#studio_eventinstance_keyoff">Studio::EventInstance::keyOff</a>.</p>
<h4 id="eventcategory"><a href="#eventcategory">EventCategory</a></h4>
<p>Event categories have been replaced in FMOD Studio by buses and VCAs, which provide much more functionality to the sound designer. In the Studio API, buses and VCAs are accessed via the <a class="apilink" href="studio-api-bus.html">Studio::Bus</a> and <a class="apilink" href="studio-api-vca.html">Studio::VCA</a> classes.</p>
<h4 id="eventreverb"><a href="#eventreverb">EventReverb</a></h4>
<p>The EventReverb class has been removed. Similar functionality can be implemented using events with <a href="glossary.html#automatic-parameter">automatic</a> distance parameters controlling reverb snapshots.</p>
<h4 id="eventqueue-and-eventqueueentry"><a href="#eventqueue-and-eventqueueentry">EventQueue and EventQueueEntry</a></h4>
<p>FMOD Studio doesn't have the concept of event queues.</p>
<h4 id="musicsystem-and-musicprompt"><a href="#musicsystem-and-musicprompt">MusicSystem and MusicPrompt</a></h4>
<p>Interactive music in FMOD Studio is implemented inside the event editor, so the MusicSystem and MusicPrompt classes have been removed.</p>
<h4 id="neteventsystem"><a href="#neteventsystem">NetEventSystem</a></h4>
<p>Whereas the old network tweaking API was implemented as a separate fmod_event_net library, the FMOD Studio live update system is built into the main API library, and can be enabled by passing <a class="apilink" href="studio-api-system.html#fmod_studio_init_liveupdate">FMOD_STUDIO_INIT_LIVEUPDATE</a> to <a class="apilink" href="studio-api-system.html#studio_system_initialize">Studio::System::initialize</a>.</p>
<h3 id="fmod-studios-core-api-versus-fmod-exs-core-api"><a href="#fmod-studios-core-api-versus-fmod-exs-core-api">10.8.2 FMOD Studio's Core API Versus FMOD Ex's Core API</a></h3>
<h4 id="no-more-recommended-startup-sequence"><a href="#no-more-recommended-startup-sequence">No more 'recommended startup sequence'</a></h4>
<p>The <a href="glossary.html#fmod-engine">FMOD Engine</a> now handles the speaker mode automatically. Starting the Core API is as simple as calling <a class="apilink" href="core-api-system.html#system_init">System::init</a>, and does not require querying caps or speaker modes to make the FMOD Engine's software <a href="glossary.html#mixer">mixer</a> match that of the operating system. If you want the software mixer to be forced into a certain speaker mode, disregarding the operating system, use <a class="apilink" href="core-api-system.html#system_setsoftwareformat">System::setSoftwareFormat</a>. The FMOD Engine will automatically <a href="glossary.html#down-mixing">downmix</a> or <a href="glossary.html#up-mixing">upmix</a> this mode if the user's system is not the same speaker mode as the one selected for the software engine. Where possible, Dolby or internal downmixing will be used to achieve better surround effect.</p>
<h4 id="added-new-dsp-effects"><a href="#added-new-dsp-effects">Added new DSP effects</a></h4>
<p>The following new <a href="glossary.html#dsp-effect">DSP effects</a> are added. (From fmod_dsp_effects.h)</p>
<div class="highlight language-cpp"><pre><span></span><span class="n">FMOD_DSP_TYPE_SEND</span><span class="p">,</span>               <span class="cm">/* This unit sends a copy of the signal to a return DSP anywhere in the DSP tree. */</span>
<span class="n">FMOD_DSP_TYPE_RETURN</span><span class="p">,</span>             <span class="cm">/* This unit receives signals from a number of send DSPs. */</span>
<span class="n">FMOD_DSP_TYPE_HIGHPASS_SIMPLE</span><span class="p">,</span>    <span class="cm">/* This unit filters sound using a simple highpass with no resonance, but has flexible cutoff and is fast. Deprecated and will be removed in a future release (see FMOD_DSP_HIGHPASS_SIMPLE remarks for alternatives). */</span>
<span class="n">FMOD_DSP_TYPE_PAN</span><span class="p">,</span>                <span class="cm">/* This unit pans the signal, possibly upmixing or downmixing as well. */</span>
<span class="n">FMOD_DSP_TYPE_THREE_EQ</span><span class="p">,</span>           <span class="cm">/* This unit is a three-band equalizer. */</span>
<span class="n">FMOD_DSP_TYPE_FFT</span><span class="p">,</span>                <span class="cm">/* This unit simply analyzes the signal and provides spectrum information back through getParameter. */</span>
<span class="n">FMOD_DSP_TYPE_LOUDNESS_METER</span><span class="p">,</span>     <span class="cm">/* This unit analyzes the loudness and true peak of the signal. */</span>
<span class="n">FMOD_DSP_TYPE_ENVELOPEFOLLOWER</span><span class="p">,</span>   <span class="cm">/* This unit tracks the envelope of the input/sidechain signal. Format to be publicly disclosed soon. */</span>
<span class="n">FMOD_DSP_TYPE_CONVOLUTIONREVERB</span><span class="p">,</span>  <span class="cm">/* This unit implements convolution reverb. */</span>
<span class="n">FMOD_DSP_TYPE_CHANNELMIX</span><span class="p">,</span>         <span class="cm">/* This unit provides per signal channel gain, and output channel mapping to allow 1 multi-channel signal made up of many groups of signals to map to a single output signal. */</span>
<span class="n">FMOD_DSP_TYPE_TRANSCEIVER</span><span class="p">,</span>        <span class="cm">/* This unit &#39;sends&#39; and &#39;receives&#39; from a selection of up to 32 different slots.  It is like a send/return but it uses global slots rather than returns as the destination.  It also has other features.  Multiple transceivers can receive from a single channel, or multiple transceivers can send to a single channel, or a combination of both. */</span>
<span class="n">FMOD_DSP_TYPE_OBJECTPAN</span><span class="p">,</span>          <span class="cm">/* This unit sends the signal to a 3d object encoder like Dolby Atmos.   Supports a subset of the FMOD_DSP_TYPE_PAN parameters. */</span>
<span class="n">FMOD_DSP_TYPE_MULTIBAND_EQ</span><span class="p">,</span>       <span class="cm">/* This unit is a flexible five band parametric equalizer. */</span>
</pre></div>

<p>FMOD's <a href="effects-reference.html#convolution-reverb">convolution reverb</a> also has the option to be GPU accelerated for big performance wins.</p>
<h4 id="new-file-format-support"><a href="#new-file-format-support">New file format support</a></h4>
<p><a class="apilink" href="core-api-sound.html#fmod_sound_type_fadpcm">FMOD_SOUND_TYPE_FADPCM</a> is a new highly optimized, branchless ADPCM variant which has higher quality than IMA ADPCM, and better performance. Great for mobiles.</p>
<h4 id="dolby-atmos-support"><a href="#dolby-atmos-support">Dolby Atmos support</a></h4>
<p>Through the <a href="effects-reference.html#object-panner">FMOD object panner</a>, sounds can be positioned spherically in 3d space to support Dolby Atmos. This includes height speakers.</p>
<h4 id="new-dsp-mixing-engine"><a href="#new-dsp-mixing-engine">New DSP mixing engine</a></h4>
<p>The FMOD Engine's software mixing engine is more flexible than that of FMOD Ex, with support for changing channel formats and speaker modes as the signal flows through the mix. The FMOD Engine's software mixing engine also has better custom DSP support, with branch idling, silence detection, sends and returns, side-chaining, circular connections and more.</p>
<h4 id="added-plug-in-info-helper-function"><a href="#added-plug-in-info-helper-function">Added plug-in info helper function</a></h4>
<p><a class="apilink" href="core-api-system.html#system_getdspinfobyplugin">System::getDSPInfoByPlugin</a> has been added to plug the gap between loading a plug-in, and getting its <a class="apilink" href="plugin-api-dsp.html#fmod_dsp_description">FMOD_DSP_DESCRIPTION</a> structure so that it can be passed to <a class="apilink" href="core-api-system.html#system_createdsp">System::createDSP</a>.</p>
<h4 id="added-background-suspension-support"><a href="#added-background-suspension-support">Added background suspension support</a></h4>
<p>For mobile devices, <a class="apilink" href="core-api-system.html#system_mixersuspend">System::mixerSuspend</a> and <a class="apilink" href="core-api-system.html#system_mixerresume">System::mixerResume</a> allows you to halt FMOD's <a href="glossary.html#mixer">cpu mixer</a> and thread before sleeping or answering a call or any other interruption event.</p>
<h4 id="channelgroups-volume-and-panning-are-now-dsp-based-rather-than-reaching-down-to-the-channels-of-the-child-channelgroups"><a href="#channelgroups-volume-and-panning-are-now-dsp-based-rather-than-reaching-down-to-the-channels-of-the-child-channelgroups">ChannelGroups volume and panning are now DSP based, rather than reaching down to the Channels of the child ChannelGroups.</a></h4>
<p>ChannelGroups in FMOD Ex were a way to scale and modify the pan and volume of the <a class="apilink" href="core-api-channel.html">Channel</a>s in the <a class="apilink" href="core-api-channelgroup.html">ChannelGroup</a>s below. The <a href="glossary.html#fmod-engine">FMOD Engine</a> now modifies pan and volume on a <a href="glossary.html#dsp">DSP</a> basis using the <a href="effects-reference.html#fader">fader DSP unit</a>. A fader unit can be repositioned in a channel group's <a href="glossary.html#effect">effect</a> list, allowing effects to be either post- or pre-fader effects.</p>
<h4 id="added-additional-output-streams"><a href="#added-additional-output-streams">Added additional output streams</a></h4>
<p><a class="apilink" href="core-api-system.html#system_attachchannelgrouptoport">System::attachChannelGroupToPort</a> and <a class="apilink" href="core-api-system.html#system_detachchannelgroupfromport">System::detachChannelGroupFromPort</a> allows signals to be sent to alternate sound outputs like headsets, controllers with speakers, and console based multi speaker arrays that are not the standard surround sound speaker output.</p>
<h4 id="added-sound-helper-function"><a href="#added-sound-helper-function">Added Sound helper function</a></h4>
<p>Added the ability for a child sound (subsound) to query for its parent via <a class="apilink" href="core-api-sound.html#sound_getsubsoundparent">Sound::getSubSoundParent</a>.</p>
<h4 id="added-sample-volume-control"><a href="#added-sample-volume-control">Added sample volume control</a></h4>
<p><a class="apilink" href="core-api-channelcontrol.html#channelcontrol_addfadepoint">ChannelControl::addFadePoint</a>, <a class="apilink" href="core-api-channelcontrol.html#channelcontrol_removefadepoints">ChannelControl::removeFadePoints</a> and <a class="apilink" href="core-api-channelcontrol.html#channelcontrol_getfadepoints">ChannelControl::getFadePoints</a> give the ability to set up a volume fade or ramp between any 2 clock points is possible. Link up multiple fade points to create envelopes. All fading is clock accurate and compensated for when pitch is changed. <a class="apilink" href="core-api-channelcontrol.html#channelcontrol_setvolumeramp">ChannelControl::setVolumeRamp</a> / <a class="apilink" href="core-api-channelcontrol.html#channelcontrol_getvolumeramp">ChannelControl::getVolumeRamp</a> can be used when queuing sounds up and for other reasons, it can be desirable to turn off ramping of volume changes, so the ability has been added to turn volume ramping (declicking) off or on per <a class="apilink" href="core-api-channel.html">Channel</a>/<a class="apilink" href="core-api-channelgroup.html">ChannelGroup</a>.</p>
<h4 id="added-utf8-support"><a href="#added-utf8-support">Added UTF8 support</a></h4>
<p>Functions such as System::getDriverInfoW have been removed in favour of UTF8 support.</p>
<h4 id="added-concept-of-a-fader-dsp-per-channel-and-channelgroup"><a href="#added-concept-of-a-fader-dsp-per-channel-and-channelgroup">Added concept of a 'fader' DSP per Channel and ChannelGroup</a></h4>
<p>Each <a class="apilink" href="core-api-channel.html">Channel</a> and <a class="apilink" href="core-api-channelgroup.html">ChannelGroup</a> has a built in 'fader' (<a class="apilink" href="core-api-common-dsp-effects.html#fmod_dsp_type_fader">FMOD_DSP_TYPE_FADER</a>). This also acts as the <a href="glossary.html#dsp">DSP</a> 'head' of the <a class="apilink" href="core-api-channel.html">Channel</a> or <a class="apilink" href="core-api-channelgroup.html">ChannelGroup</a> by default.<br />
This can of course be changed later. If you add an <a href="glossary.html#effect">effect</a>, you can position it to be the head, and the fader will be before that in the <a href="glossary.html#signal">signal</a> chain.<br />
A fader DSP simply adjusts volume of the signal for a mix, and also supports sample accurate volume fade points, for envelopes and fade ins / fade outs.<br />
A panner is a separate entity which can pan a sound in mono, stereo and surround using a variety of parameters including position/direction/extent/rotation/axis control and 3d position control.<br />
The order of processing of a fader and panner can be controlled using <a class="apilink" href="core-api-channelcontrol.html#channelcontrol_setdspindex">ChannelControl::setDSPIndex</a>, and it can be positioned into an effect chain so that panning comes before an effect or after, with fading coming at a different position in the effect chain.</p>
<h4 id="new-dspconnection-types-supported"><a href="#new-dspconnection-types-supported">New DSPConnection types supported</a></h4>
<p><a class="apilink" href="core-api-dsp.html#dsp_addinput">DSP::addInput</a> now has a new optional <span class="dead-link" href="glossary.html#parameter">parameter</span class="dead-link"> to describe the connection's behavior between two DSP units. <a class="apilink" href="core-api-dspconnection.html#fmod_dspconnection_type">FMOD_DSPCONNECTION_TYPE</a> has been added to tell an input DSP that it should mix to a 'sidechain' buffer, which is a special buffer for DSP units that want to process a sidechain (for example a compressor) through a DSP unit's <a class="apilink" href="plugin-api-dsp.html#fmod_dsp_state">FMOD_DSP_STATE</a> structure. This signal is not audible but is used to affect behavior within the DSP. <a class="apilink" href="core-api-dspconnection.html#fmod_dspconnection_type_sidechain">FMOD_DSPCONNECTION_TYPE_SIDECHAIN</a> would be used here.<br />
It should only consume existing data, not execute the input to generate that data. <a class="apilink" href="core-api-dspconnection.html#fmod_dspconnection_type_send">FMOD_DSPCONNECTION_TYPE_SEND</a> would be used here. This can be useful for graph dependency reasons, so that an input is not executed before it should be.</p>
<h4 id="new-dsp-parameter-types"><a href="#new-dsp-parameter-types">New DSP parameter types</a></h4>
<p>In FMOD Ex, only float parameters were supported. Now Int, Bool and Data parameters are supported. <br />
Use:</p>
<ul>
<li><a class="apilink" href="core-api-dsp.html#dsp_setparameterfloat">DSP::setParameterFloat</a>, <a class="apilink" href="core-api-dsp.html#dsp_getparameterfloat">DSP::getParameterFloat</a></li>
<li><a class="apilink" href="core-api-dsp.html#dsp_setparameterint">DSP::setParameterInt</a>, <a class="apilink" href="core-api-dsp.html#dsp_getparameterint">DSP::getParameterInt</a></li>
<li><a class="apilink" href="core-api-dsp.html#dsp_setparameterbool">DSP::setParameterBool</a>, <a class="apilink" href="core-api-dsp.html#dsp_getparameterbool">DSP::getParameterBool</a></li>
<li><a class="apilink" href="core-api-dsp.html#dsp_setparameterdata">DSP::setParameterData</a>, <a class="apilink" href="core-api-dsp.html#dsp_getparameterdata">DSP::getParameterData</a></li>
</ul>
<h4 id="fmod_hardware-support"><a href="#fmod_hardware-support">FMOD_HARDWARE support</a></h4>
<p>The FMOD Engine's software mixing is sufficiently advanced that it can do things that would be impossible with the limited features of hardware voices. Today, when multicore processors are common even on mobile platforms, hardware voice support provides no real advantage; not when the FMOD Engine can be faster, better quality, and more flexible. As such, all sounds and voices handled by the FMOD Engine are software mixed.</p>
<p>API changes:</p>
<ul>
<li>System::setHardwareChannels is removed</li>
<li>System::getDriverCaps is removed. systemrate, speakermode, speakermodechannels parameters have been added to <a class="apilink" href="core-api-system.html#system_getdriverinfo">System::getDriverInfo</a> to provide the information which may be important to the developer. Similarly, System::getRecordDriverCaps has been removed, in favour of <a class="apilink" href="core-api-system.html#system_getrecorddriverinfo">System::getRecordDriverInfo</a>.</li>
<li>System::setSpeakerMode and System::getSpeakerMode are removed, and instead are now moved into <a class="apilink" href="core-api-system.html#system_setsoftwareformat">System::setSoftwareFormat</a> because 'speakermode' now only affects the internal mixer, and the operating system speaker mode is matched at runtime through matrix upmixing or downmixing (automatically).</li>
</ul>
<h4 id="channels-and-channelgroups-have-been-merged-into-channelcontrol"><a href="#channels-and-channelgroups-have-been-merged-into-channelcontrol">Channels and ChannelGroups have been merged into 'ChannelControl'</a></h4>
<p><a class="apilink" href="core-api-channel.html">Channel</a>s and <a class="apilink" href="core-api-channelgroup.html">ChannelGroup</a>s had some similar functionality in FMOD Ex (ie setVolume, setPaused), but the FMOD Engine takes it even further. The FMOD Engine is designed so that <a class="apilink" href="core-api-channelgroup.html">ChannelGroup</a>s can have a lot more control, including allowing pausing and muting at the DSP node level, adding effects, and positioning in 3D.</p>
<h4 id="converting-fmod-reverb-parameters"><a href="#converting-fmod-reverb-parameters">Converting FMOD Reverb parameters</a></h4>
<p>The FMOD Engine handles reverb parameters differently to FMOD Ex. Use this table to convert from FMOD Ex parameters to FMOD Engine parameters.</p>
<table>
<thead>
<tr>
<th>FMOD Engine property</th>
<th align="center">Range</th>
<th>FMOD Ex property / conversion formula to create FMOD Engine value</th>
</tr>
</thead>
<tbody>
<tr>
<td>DecayTime (ms)</td>
<td align="center">100 to 20000</td>
<td>DecayTime * 1000</td>
</tr>
<tr>
<td>EarlyDelay (ms)</td>
<td align="center">0 to   300</td>
<td>ReflectionsDelay * 1000</td>
</tr>
<tr>
<td>LateDelay (ms)</td>
<td align="center">0 to   100</td>
<td>ReverbDelay * 1000</td>
</tr>
<tr>
<td>HFReference (Hz)</td>
<td align="center">20 to 20000</td>
<td>HFReference</td>
</tr>
<tr>
<td>HFDecayRatio (%)</td>
<td align="center">0 to   100</td>
<td>DecayHFRatio * 100</td>
</tr>
<tr>
<td>Diffusion (%)</td>
<td align="center">0 to   100</td>
<td>Diffusion</td>
</tr>
<tr>
<td>Density (%)</td>
<td align="center">0 to   100</td>
<td>Density</td>
</tr>
<tr>
<td>LowShelfFrequency (Hz)</td>
<td align="center">20 to  1000</td>
<td>LFReference</td>
</tr>
<tr>
<td>LowShelfGain (dB)</td>
<td align="center">-48 to    12</td>
<td>RoomLF / 100</td>
</tr>
<tr>
<td>HighCut (Hz)</td>
<td align="center">20 to 20000</td>
<td>IF RoomHF &lt; 0 THEN HFReference / sqrt((1-HFGain) / HFGain) ELSE 20000</td>
</tr>
<tr>
<td>EarlyLateMix (%)</td>
<td align="center">0 to   100</td>
<td>IF Reflections &gt; -10000 THEN LateEarlyRatio/(LateEarlyRatio + 1) * 100 ELSE 100</td>
</tr>
<tr>
<td>WetLevel (dB)</td>
<td align="center">-80 to    20</td>
<td>10 * log10(EarlyAndLatePower) + Room / 100</td>
</tr>
</tbody>
</table>
<p>Note: Clamp all values to maximum (after conversion) as some conversions may exceed the new parameter range.</p>
<table>
<thead>
<tr>
<th>Intermediate variables used in conversion</th>
<th>Formulas</th>
</tr>
</thead>
<tbody>
<tr>
<td>LateEarlyRatio</td>
<td>pow(10, (Reverb - Reflections) / 2000)</td>
</tr>
<tr>
<td>EarlyAndLatePower</td>
<td>pow(10, Reflections / 1000) + pow(10, Reverb / 1000)</td>
</tr>
<tr>
<td>HFGain</td>
<td>pow(10, RoomHF / 2000)</td>
</tr>
</tbody>
</table>
<h4 id="system_set3dspeakerposition-renamed"><a href="#system_set3dspeakerposition-renamed">System::set3DSpeakerPosition renamed</a></h4>
<p><a class="apilink" href="core-api-system.html#system_setspeakerposition">System::setSpeakerPosition</a> is a minor name change to denote that 3d and 2d positioning is affected by speaker location.</p>
<h4 id="fmod_channel_free-fmod_channel_reuse-removed-default-channelgroup-now-passed-to-playsound-if-needed"><a href="#fmod_channel_free-fmod_channel_reuse-removed-default-channelgroup-now-passed-to-playsound-if-needed">FMOD_CHANNEL_FREE / FMOD_CHANNEL_REUSE removed. Default ChannelGroup now passed to playSound if needed</a></h4>
<p><a class="apilink" href="core-api-system.html#system_playsound">System::playSound</a> and <a class="apilink" href="core-api-system.html#system_playdsp">System::playDSP</a> now do not take a 'channel' parameter. All channels behave the same way as FMOD_CHANNEL_FREE would have in FMOD Ex.<br />
Seeing as a parameter was removed from playSound/playDSP, a new one was added to remove the overhead of disconnecting and reconnecting DSP graph nodes after playSound was called, so that they could be hooked up to a new ChannelGroup other than the master ChannelGroup. Consider this addition a performance optimization, and a simplification in API calls.</p>
<h4 id="cdrom-cdda-support-removed"><a href="#cdrom-cdda-support-removed">CDROM / CDDA support removed</a></h4>
<p>Legacy support for CDROM redbook audio playback has been removed due to lack of interest and issues with maintaining said code.</p>
<h4 id="system_getspectrum-and-system_getwavedata-removed"><a href="#system_getspectrum-and-system_getwavedata-removed">System::getSpectrum and System::getWaveData removed</a></h4>
<p>Add a custom DSP unit to capture DSP wavedata from the output stage. Use the master <a class="apilink" href="core-api-channelgroup.html">ChannelGroup</a>'s DSP head with <a class="apilink" href="core-api-system.html#system_getmasterchannelgroup">System::getMasterChannelGroup</a> and <a class="apilink" href="core-api-channelcontrol.html#channelcontrol_getdsp">ChannelControl::getDSP</a>.<br />
Add a built in <a href="effects-reference.html#fft">FFT DSP unit</a> type to capture spectrum data from the output stage. Create a built in FFT unit with <a class="apilink" href="core-api-system.html#system_createdspbytype">System::createDSPByType</a> and <a class="apilink" href="core-api-common-dsp-effects.html#fmod_dsp_type_fft">FMOD_DSP_TYPE_FFT</a>, then add the effect to the master <a class="apilink" href="core-api-channelgroup.html">ChannelGroup</a> with <a class="apilink" href="core-api-channelcontrol.html#channelcontrol_adddsp">ChannelControl::addDSP</a>. Use <a class="apilink" href="core-api-dsp.html#dsp_getparameterdata">DSP::getParameterData</a> to get the raw spectrum data or use <a class="apilink" href="core-api-dsp.html#dsp_getparameterfloat">DSP::getParameterFloat</a> to get the dominant frequency from the signal.</p>
<h4 id="w-function-wide-char-support-removed"><a href="#w-function-wide-char-support-removed">'W' function wide char support removed</a></h4>
<p>Functions such as System::getDriverInfoW have been removed in favour of UTF8 support.</p>
<h4 id="system_setreverbambientproperties-removed"><a href="#system_setreverbambientproperties-removed">System::setReverbAmbientProperties removed</a></h4>
<p>The 'background' ambient reverb for a 3d reverb system is now just the standard reverb set with <a class="apilink" href="core-api-system.html#system_setreverbproperties">System::setReverbProperties</a>.</p>
<h4 id="system_getdspclock-removed"><a href="#system_getdspclock-removed">System::getDSPClock removed</a></h4>
<p>Use the <a href="glossary.html#dsp-clock">DSP clock</a> of the master <a class="apilink" href="core-api-channelgroup.html">ChannelGroup</a> instead with <a class="apilink" href="core-api-system.html#system_getmasterchannelgroup">System::getMasterChannelGroup</a> and <a class="apilink" href="core-api-channelcontrol.html#channelcontrol_getdspclock">ChannelControl::getDSPClock</a>.</p>
<h4 id="getmemoryinfo-functions-have-been-removed-from-all-classes"><a href="#getmemoryinfo-functions-have-been-removed-from-all-classes">getMemoryInfo functions have been removed from all classes</a></h4>
<p>Due to the unreliability of the function in FMOD Ex due to caching, threads, and shared memory throwing results out, the function has been removed. Alternate memory tracking methods will be added later. FMOD::Memory_GetStats and logging is the best way to track memory at the moment.</p>
<h4 id="sound_setvariations-and-sound_getvariations-have-been-removed"><a href="#sound_setvariations-and-sound_getvariations-have-been-removed">Sound::setVariations and Sound::getVariations have been removed</a></h4>
<p>Due to this being a 'helper' function that can easily be achieved in user code, this was deemed not necessary and removed.</p>
<h4 id="sound_setsubsoundsentence-has-been-removed"><a href="#sound_setsubsoundsentence-has-been-removed">Sound::setSubSoundSentence has been removed</a></h4>
<p>This function has been removed in favour of the extremely precise and more reliable <a class="apilink" href="core-api-channelcontrol.html#channelcontrol_setdelay">ChannelControl::setDelay</a> functionality. 2 or more sounds can be queued up to play end to end using this function, with the added benefit of cross fades and overlaps.</p>
<h4 id="setdelay-and-clock-functions-now-use-64bit-long-long-type-rather-than-than-32bit-hi-and-32bit-low-part-parameters"><a href="#setdelay-and-clock-functions-now-use-64bit-long-long-type-rather-than-than-32bit-hi-and-32bit-low-part-parameters">setDelay and clock functions now use 64bit 'long long' type rather than than 32bit hi and 32bit low part parameters.</a></h4>
<p>Due to the complexity of working in fixed point, and seeing as there is a consistent 64bit type for all compilers in long long that FMOD supports, we have switched to this type.<br />
1 32bit value would wrap around in 24 hours at 48khz, so 64bit values will last for 12 million years which should be enough to avoid in game clock wrap around.</p>
<h4 id="channel_setspeakermix-channel_setspeakerlevels-channel_setinputchannelmix-channel_getpan-channel_getspeakermix-and-channel_getspeakerlevels-removed"><a href="#channel_setspeakermix-channel_setspeakerlevels-channel_setinputchannelmix-channel_getpan-channel_getspeakermix-and-channel_getspeakerlevels-removed">Channel::setSpeakerMix, Channel::setSpeakerLevels, Channel::setInputChannelMix, Channel::getPan, Channel::getSpeakerMix and Channel::getSpeakerLevels removed</a></h4>
<p>A cleaner replacement has been made for these functions,</p>
<ul>
<li><a class="apilink" href="core-api-channelcontrol.html#channelcontrol_setmixlevelsoutput">ChannelControl::setMixLevelsOutput</a> (float frontleft, float frontright, float center, float lfe, float surroundleft, float surroundright, float backleft, float backright);</li>
<li><a class="apilink" href="core-api-channelcontrol.html#channelcontrol_setmixlevelsinput">ChannelControl::setMixLevelsInput</a> (float *levels, int numlevels);</li>
<li><a class="apilink" href="core-api-channelcontrol.html#channelcontrol_setmixmatrix">ChannelControl::setMixMatrix</a> (float *matrix, int outchannels, int inchannels, int inchannel_hop = 0);</li>
<li><a class="apilink" href="core-api-channelcontrol.html#channelcontrol_getmixmatrix">ChannelControl::getMixMatrix</a> (float <em>matrix, int </em>outchannels, int *inchannels, int inchannel_hop = 0);</li>
</ul>
<p>Note that because setPan, setMixLevelsOutput and setMixLevelsInput all affect a final pan matrix, only getMixMatrix is available as the 'getter'. There is no more exclusive mode for the panning technique like there was in FMOD Ex. All 3 functions can now affect the final matrix. The setMixMatrix function now allows instant setting of a full matrix for performance reasons, rather than calling setSpeakerLevels each time for each speaker.</p>
<h4 id="dspconnection_setlevelsgetlevels-have-been-removed"><a href="#dspconnection_setlevelsgetlevels-have-been-removed">DSPConnection::setLevels/getLevels have been removed.</a></h4>
<p>As above, new functionality is available to produce the same result. Rather than setting output levels row by row, a full 2 dimensional matrix is supplied with <a class="apilink" href="core-api-dspconnection.html#dspconnection_setmixmatrix">DSPConnection::setMixMatrix</a>.</p>
<h4 id="channel_set3dpanlevel-misnomer-renamed"><a href="#channel_set3dpanlevel-misnomer-renamed">Channel::set3DPanLevel misnomer renamed</a></h4>
<p>The FMOD Ex function did not actually only affect pan, it also affected doppler and distance attenuation so to call it 'pan' level was not really correct. THe FMOD Engine corrects this with <a class="apilink" href="core-api-channelcontrol.html#channelcontrol_set3dlevel">ChannelControl::set3DLevel</a>.</p>
<h4 id="override-functions-removed-from-channelgroup-class"><a href="#override-functions-removed-from-channelgroup-class">'override' functions removed from ChannelGroup class</a></h4>
<p>Because volume/pitch/muting/reverb properties and pausing has been added as a <a class="apilink" href="core-api-channelgroup.html">ChannelGroup</a> concept at the DSP level, <a class="apilink" href="core-api-channelgroup.html">ChannelGroup</a>s no longer rely on their 'channels' to do pausing and muting type logic. The <a class="apilink" href="core-api-channelgroup.html">ChannelGroup</a>'s DSP itself will directly mute/pause etc, thanks to the removal of FMOD_HARDWARE support.</p>
<h4 id="system_adddsp-removed-from-the-system-api"><a href="#system_adddsp-removed-from-the-system-api">System::addDSP removed from the System API</a></h4>
<p>Rather than using the 'system' to add a DSP to, the user must use <a class="apilink" href="core-api-system.html#system_getmasterchannelgroup">System::getMasterChannelGroup</a> which gets the top level <a class="apilink" href="core-api-channelgroup.html">ChannelGroup</a>, then use <a class="apilink" href="core-api-channelcontrol.html#channelcontrol_adddsp">ChannelControl::addDSP</a> to add the DSP to it, which effectively puts at the end of the signal chain.</p>
<h4 id="dsp_remove-removed-from-the-dsp-api"><a href="#dsp_remove-removed-from-the-dsp-api">DSP::remove removed from the DSP API</a></h4>
<p>Effects that are added with <a class="apilink" href="core-api-channelcontrol.html#channelcontrol_adddsp">ChannelControl::addDSP</a> are owned by the ChannelControl that added it, and therefore must be removed with <a class="apilink" href="core-api-channelcontrol.html#channelcontrol_removedsp">ChannelControl::removeDSP</a>, instead of having the DSP removing itself. This helps the <a class="apilink" href="core-api-channelgroup.html">ChannelGroup</a> or <a class="apilink" href="core-api-channel.html">Channel</a> manage resources.</p></div>

<p class="manual-footer">FMOD Engine User Manual 2.03.11 (2025-11-17). &copy; 2025 Firelight Technologies Pty Ltd.</p>
</div>
</body>
</html>

